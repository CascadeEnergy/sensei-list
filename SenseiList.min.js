!function(a,b){"function"==typeof define&&define.amd?define(["jquery","underscore","backbone","backbone.babysitter","backbone-gcm"],b):a.SenseiList=b(a.jQuery,a._,a.Backbone,a.ChildViewContainer,a.gcm)}(this,function(a,b,c,d){"use strict";var e=c.View.extend({constructor:function(){b.bindAll(this,"render"),this._setupBabysitter();var a=Array.prototype.slice.apply(arguments);c.View.prototype.constructor.apply(this,a),this._setupListeners()},_setupBabysitter:function(){this.babies=new d},_setupListeners:function(){this.listenTo(this.collection,"add",this.addBaby,this),this.listenTo(this.collection,"remove",this.freeItem,this),this.listenTo(this.collection,"reset",this.render,this)},render:function(){return this._renderBabies(),this},_renderBabies:function(){this.freeAllBabies(),this.collection&&this.collection.length>0&&this.addAllBabies()},addAllBabies:function(){var a;this.itemView||throwError("An `itemView` must be specified","NoItemViewError"),this.collection.each(function(b){a=this.itemView,this.addItem(b,a)},this)},addBaby:function(a){var b;this.itemView||throwError("An `itemView` must be specified","NoItemViewError"),b=this.itemView,this.addItem(a,b)},addItem:function(a,b){var c=new b({model:a});this.babies.add(c),c.render(),this.appendHtml(this,c)},freeAllBabies:function(){this.babies.each(function(a){this.freeBaby(a)},this)},freeBaby:function(a){a&&(this.stopListening(a),a.free?a.free():a.remove&&a.remove(),this.babies.remove(a))},freeItem:function(a){var b=this.babies.findByModel(a);this.freeBaby(b)},free:function(){this.freeAllBabies(),this.remove(),this.collection.off()},appendHtml:function(a,b){a.$el.append(b.el)}});return e});